<execution>
  <constraint>
    ## 技术约束条件
    - **目录路径固定**: 所有文章和list.md必须保存在 `/home/macl/projects2025/blogs`
    - **单次写入限制**: 每次写入文件的内容不能超过系统限制
    - **时间信息准确**: 所有时间信息必须通过终端命令获取真实时间
    - **文件编码统一**: 所有文件使用UTF-8编码
    - **Markdown格式**: 文章和list.md都使用Markdown格式
  </constraint>

  <rule>
    ## 强制执行规则
    - **先摘要后文章**: 必须先更新list.md摘要，再生成完整文章
    - **避免重复处理**: 严格检查list.md避免重复处理已有内容
    - **单一主题原则**: 每篇文章只能围绕一个核心主题
    - **分批写入**: 长文章必须分批写入，避免超出单次写入限制
    - **时间范围记录**: 每个主题必须记录对应的对话时间范围
  </rule>

  <guideline>
    ## 执行指导原则
    - **质量优先**: 优先保证文章质量，而非数量
    - **读者友好**: 文章风格要适合技术博客读者
    - **实用导向**: 突出技术内容的实用价值
    - **结构清晰**: 保持文章结构层次分明
    - **代码优化**: 对话中的代码要整理优化后再放入文章
  </guideline>

  <process>
    ## 完整工作流程
    
    ### Phase 1: 环境准备与历史分析
    
    #### Step 1.1: 环境检查
    ```bash
    # 检查和创建必要目录
    mkdir -p /home/macl/projects2025/blogs
    
    # 检查list.md文件是否存在
    ls -la /home/macl/projects2025/blogs/list.md
    ```
    
    #### Step 1.2: 历史内容回顾
    ```
    读取操作序列：
    1. 读取 /home/macl/projects2025/blogs/list.md
    2. 解析已处理的时间范围
    3. 识别最后处理的时间节点
    4. 确定新内容的起始时间点
    ```
    
    #### Step 1.3: 对话历史获取
    ```
    对话分析维度：
    - 时间范围：从最后处理点到当前时间
    - 内容类型：技术讨论、问题解决、经验分享
    - 价值评估：实用性、完整性、创新性
    - 主题识别：核心技术点、应用场景
    ```
    
    ### Phase 2: 内容分析与主题聚合
    
    #### Step 2.1: 对话内容筛选
    ```
    筛选标准：
    ✅ 包含技术知识点或解决方案
    ✅ 具有完整的问题-分析-解决过程
    ✅ 有实际应用价值
    ✅ 内容长度足够支撑文章
    
    排除标准：
    ❌ 纯粹的日常对话
    ❌ 重复的技术讨论
    ❌ 过于简单的操作说明
    ❌ 缺乏上下文的片段
    ```
    
    #### Step 2.2: 主题聚合策略
    ```
    聚合维度：
    1. 技术栈分类：
       - 前端开发 (React, Vue, JavaScript)
       - 后端开发 (Python, Node.js, Java)
       - 数据库 (MySQL, PostgreSQL, Redis)
       - 运维部署 (Docker, K8s, CI/CD)
    
    2. 场景分类：
       - 项目实战 (具体项目的开发过程)
       - 问题解决 (遇到问题及解决方案)
       - 工具使用 (开发工具的使用技巧)
       - 学习笔记 (技术学习和总结)
    
    3. 内容完整性：
       - 确保每个主题有足够内容（>1000字潜力）
       - 包含实际代码示例或操作步骤
       - 有明确的开始和结论
    ```
    
    #### Step 2.3: 主题优先级排序
    ```
    排序标准：
    1. 实用性权重：40%
    2. 完整性权重：30%
    3. 创新性权重：20%
    4. 时效性权重：10%
    
    输出：按优先级排序的主题列表
    ```
    
    ### Phase 3: 文章摘要生成与记录
    
    #### Step 3.1: 获取当前时间
    ```bash
    # 获取当前日期时间
    date +"%Y-%m-%d %H:%M:%S"
    ```
    
    #### Step 3.2: 摘要格式标准
    ```markdown
    ## [序号]. [文章标题]
    - **生成时间**: YYYY-MM-DD HH:MM:SS
    - **对话时间范围**: YYYY-MM-DD HH:MM ~ YYYY-MM-DD HH:MM
    - **主要技术栈**: [技术标签]
    - **文章类型**: [项目实战/问题解决/工具使用/学习笔记]
    - **核心内容**: [一句话描述文章核心内容]
    - **文件名**: [filename].md
    ```
    
    #### Step 3.3: 更新list.md
    ```
    操作流程：
    1. 读取现有list.md内容
    2. 在文件末尾追加新的摘要条目
    3. 保持格式一致性
    4. 保存文件
    ```
    
    ### Phase 4: 文章内容生成
    
    #### Step 4.1: 文章结构模板
    ```markdown
    # [吸引人的文章标题]
    
    > **写作时间**: YYYY-MM-DD  
    > **技术栈**: [相关技术标签]  
    > **适用人群**: [目标读者群体]
    
    ## 📋 前言
    
    [简短的背景介绍和文章概述]
    
    ## 🎯 核心内容
    
    ### [小标题1]
    [具体内容，包含代码示例]
    
    ### [小标题2]
    [具体内容，包含操作步骤]
    
    ## 💡 核心要点总结
    
    - **要点1**: [关键技术点]
    - **要点2**: [注意事项]
    - **要点3**: [最佳实践]
    
    ## 🚀 实际应用建议
    
    [实际应用场景和建议]
    
    ## 📚 相关资源
    
    - [相关链接或参考资料]
    
    ---
    
    **如果这篇文章对你有帮助，欢迎点赞收藏！有问题可以在评论区讨论。**
    ```
    
    #### Step 4.2: 内容生成策略
    ```
    生成要求：
    1. **标题优化**: 使用吸引人的技术博客标题
    2. **语言风格**: 技术专业但易懂，避免过于口语化
    3. **代码整理**: 对话中的代码要重新格式化和注释
    4. **结构优化**: 重新组织内容逻辑，增强可读性
    5. **实用导向**: 突出实际应用价值和操作步骤
    ```
    
    #### Step 4.3: 分批写入策略
    ```
    写入原则：
    - 每次写入不超过2000字
    - 长文章分为多个部分分别写入
    - 确保每个部分的完整性
    - 使用适当的markdown标记
    ```
    
    ### Phase 5: 质量检查与优化
    
    #### Step 5.1: 内容质量检查
    ```
    检查清单：
    ✅ 文章标题是否吸引人且描述准确
    ✅ 内容结构是否清晰有序
    ✅ 代码示例是否正确且有注释
    ✅ 技术术语是否准确
    ✅ 是否包含实用的操作步骤
    ✅ 文章长度是否适中（800-3000字）
    ```
    
    #### Step 5.2: 文件管理
    ```
    文件命名规范：
    - 格式：YYYYMMDD_主题关键词.md
    - 示例：20250704_fastapi_postgresql_integration.md
    
    目录结构：
    /home/macl/projects2025/blogs/
    ├── list.md (文章摘要索引)
    ├── 20250704_topic1.md
    ├── 20250704_topic2.md
    └── ...
    ```
  </process>

  <criteria>
    ## 质量评价标准
    
    ### 内容质量标准
    - ✅ 技术内容准确无误
    - ✅ 文章结构清晰完整
    - ✅ 代码示例可运行
    - ✅ 实用价值明显
    - ✅ 语言表达专业易懂
    
    ### 工作流程标准
    - ✅ 严格按照5个阶段执行
    - ✅ 先更新摘要再生成文章
    - ✅ 避免重复处理已有内容
    - ✅ 所有文件保存到指定目录
    - ✅ 时间信息真实准确
    
    ### 用户体验标准
    - ✅ 文章易于阅读和理解
    - ✅ 内容对目标读者有价值
    - ✅ 代码示例清晰可复制
    - ✅ 文章长度适中不冗长
    - ✅ 格式规范便于传播
  </criteria>
</execution> 